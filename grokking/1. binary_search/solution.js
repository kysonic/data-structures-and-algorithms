import assert from 'node:assert/strict';

// Идея бинарного поиска проста - в отсортированном по возрастанию массиве мы ищем элемент по середине
// Спрашиваем - он равен или больше или меньше заданного. Если равен - возвращаем результат,
// если больше мы должны взять другой отрезок, от начала до середины, если меньше, то от середины до конца
// условие выхода - если отрезок не верный (начало больше конца)
// Также стоит обработать случаи с пустым массивом
function binarySearch(arr, elem) {
    // Обрабатываем пустой случай
    if (!arr.length) {
        return -1;
    }

    let start = 0;
    let end = arr.length - 1;

    while (start <= end) {
        const mid = Math.floor((start + end) / 2);
        const guess = arr[mid];

        if (guess === elem) {
            return mid;
        }
        // Если элемент arr[mid] не совпадает с искомым, он больше не должен участвовать в последующих итерациях. Например:
        // Если guess > elem, то все элементы правее mid заведомо больше elem, поэтому новая верхняя граница становится mid - 1.
        // Если guess < elem, то все элементы левее mid (включая сам mid) меньше elem, поэтому новая нижняя граница становится mid + 1.
        if (guess > elem) {
            end = mid - 1;
        } else {
            start = mid + 1;
        }
    }

    return -1;
}

// Элемент в середине массива
assert.equal(binarySearch([1, 2, 3, 4, 5, 6, 7, 8], 4), 3);
console.log('Элемент в середине массива - OK');
// Элемент в начале массива
assert.equal(binarySearch([1, 2, 3, 4, 5], 1), 0);
console.log('Элемент в начале массива - OK');
// Элемент в конце массива
assert.equal(binarySearch([1, 2, 3, 4, 5], 5), 4);
console.log('Элемент в конце массива - OK');
// Элемент отсутствует в непустом массиве
assert.equal(binarySearch([1, 3, 5, 7], 4), -1);
console.log('Элемент отсутствует в непустом массиве - OK');
// Пустой массив
assert.equal(binarySearch([], 42), -1);
console.log('Пустой массив - OK');
// Массив из одного элемента (элемент найден)
assert.equal(binarySearch([6], 6), 0);
console.log('Массив из одного элемента (элемент найден) - OK');

console.log('Все тесты пройдены!');
